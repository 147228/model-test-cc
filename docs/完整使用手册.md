# 完整使用手册

## 目录

1. [快速开始](#快速开始)
2. [详细步骤](#详细步骤)
3. [高级配置](#高级配置)
4. [测试用例管理](#测试用例管理)
5. [常见问题](#常见问题)
6. [最佳实践](#最佳实践)

---

## 快速开始

### 5分钟上手

1. **启动程序**
   ```bash
   双击 "启动.bat"
   ```

2. **配置API**（首次使用）
   - API URL: `https://yunwu.ai/v1`
   - API Key: `你的密钥`
   - 文生文模型: `gemini-3-pro-preview`
   - 文生图模型: `gemini-3-pro-image-preview`
   - 点击"保存配置"

3. **开始测评**
   - 勾选测评类型
   - 点击"开始测评"
   - 等待完成

4. **查看结果**
   - 点击"打开输出目录"
   - 打开 `output/website/index.html`

---

## 详细步骤

### 步骤1：环境准备

#### 检查Python版本
```bash
python --version
# 需要 Python 3.7 或更高版本
```

#### 安装依赖（可选）
```bash
pip install -r requirements.txt
```

或直接运行 `启动.bat`，会自动检查并安装。

### 步骤2：启动程序

#### Windows用户
双击 `启动.bat` 文件

#### Mac/Linux用户
```bash
python main.py
```

#### 命令行启动
```bash
cd "C:\Users\bisu5\Desktop\夕小瑶科技\AI模型一键测评工具"
python main.py
```

### 步骤3：配置API

#### 界面说明

```
┌─────────────────────────────────────────────┐
│ API配置                                      │
├─────────────────────────────────────────────┤
│ API URL:    [https://yunwu.ai/v1          ] │
│ API Key:    [••••••••••••••••••••••••••••••] │
│ 文生文模型:  [gemini-3-pro-preview         ] │
│ 文生图模型:  [gemini-3-pro-image-preview   ] │
│ 并发线程:   [10 ▼]          [保存配置]      │
└─────────────────────────────────────────────┘
```

#### 配置项说明

| 配置项 | 必填 | 说明 | 示例 |
|--------|------|------|------|
| **API URL** | ✅ | API端点地址，不要包含 /chat/completions | https://yunwu.ai/v1 |
| **API Key** | ✅ | 认证密钥 | sk-xxx... |
| **文生文模型** | ⚠️ | 文本生成模型名称（测评文生文时必填） | gemini-3-pro-preview |
| **文生图模型** | ⚠️ | 图像生成模型名称（测评文生图时必填） | gemini-3-pro-image-preview |
| **并发线程** | ✅ | 同时运行的测试数量 | 10（推荐） |

#### 配置示例

**示例1：Gemini模型（通过代理）**
```
API URL:        https://yunwu.ai/v1
API Key:        sk-XcC3J5iMPxwANElqX6eFNodPUNihtvzSIt8R3DjXliKGStGG
文生文模型:      gemini-3-pro-preview
文生图模型:      gemini-3-pro-image-preview
并发线程:       10
```

**示例2：OpenAI GPT-4**
```
API URL:        https://api.openai.com/v1
API Key:        sk-proj-xxx...
文生文模型:      gpt-4-turbo-preview
文生图模型:      dall-e-3
并发线程:       5
```

**示例3：Claude**
```
API URL:        https://api.anthropic.com/v1
API Key:        sk-ant-xxx...
文生文模型:      claude-3-sonnet-20240229
文生图模型:      （Claude暂不支持图像生成）
并发线程:       10
```

### 步骤4：选择测评类型

```
┌─────────────────────────────────────────┐
│ 测试选项                                 │
├─────────────────────────────────────────┤
│ ☑ 文生文测评      ☑ 文生图测评          │
└─────────────────────────────────────────┘
```

- **文生文测评**: 测试生成HTML代码的能力（10个案例）
- **文生图测评**: 测试生成图像的能力（10个案例）
- 可以同时勾选，也可以只选一个

### 步骤5：开始测评

点击"开始测评"按钮后：

1. **实时进度**
   ```
   [████████████░░░░░░░░] 60%
   正在执行文生图测评...
   ```

2. **运行日志**
   ```
   [14:32:10] 开始AI模型测评
   [14:32:11] 开始文生文测试，共 10 个案例
   [14:32:25] [文生文] T01 机械花朵开合动画 - 成功
   [14:32:38] [文生文] T02 3D立方体动画 - 成功
   ...
   ```

3. **中途停止**
   - 点击"停止"按钮可以随时中断

### 步骤6：查看结果

#### 方式1：通过界面
1. 测评完成后自动弹出提示
2. 点击"是"自动在浏览器中打开网站

#### 方式2：手动打开
1. 点击"打开输出目录"
2. 进入 `website` 文件夹
3. 双击 `index.html`

#### 网站功能

**首页统计**
```
┌──────────┐ ┌──────────┐ ┌──────────┐
│    10    │ │    10    │ │    20    │
│ 文生文测试│ │ 文生图测试│ │ 总测试数  │
└──────────┘ └──────────┘ └──────────┘
```

**文生文结果卡片**
```
┌─────────────────────────────────┐
│ 机械花朵开合动画      [成功]     │
│ T01                              │
│ ─────────────────────────────── │
│ 请创建一个HTML文件...           │
│                                  │
│ [查看响应]  [查看演示]           │
└─────────────────────────────────┘
```

**文生图结果卡片**
```
┌─────────────────────────────────┐
│ 全息投影会议室        [成功]     │
│ I01                              │
│ ─────────────────────────────── │
│ [生成的图片]                     │
│                                  │
│ A futuristic holographic...     │
│                                  │
│ [查看响应]                       │
└─────────────────────────────────┘
```

---

## 高级配置

### 调整并发线程数

#### 原则
- **API限制较严**: 设置5-10
- **API限制宽松**: 设置15-30
- **网络不稳定**: 设置5以下
- **追求速度**: 设置20-30

#### 影响
```
5线程:  20个案例约30分钟
10线程: 20个案例约15分钟
20线程: 20个案例约8分钟
30线程: 20个案例约5分钟

注意：过高可能触发API频率限制
```

### 手动编辑配置文件

配置文件位置：`config.json`

```json
{
  "api_url": "https://yunwu.ai/v1",
  "api_key": "你的密钥",
  "text_model": "gemini-3-pro-preview",
  "image_model": "gemini-3-pro-image-preview",
  "max_threads": 10
}
```

修改后重启程序即可加载。

---

## 测试用例管理

### 查看测试用例

文件位置：
- 文生文: `test_cases/text_cases.json`
- 文生图: `test_cases/image_cases.json`

### 添加新测试用例

#### 文生文案例

编辑 `test_cases/text_cases.json`：

```json
{
  "id": "T11",
  "name": "你的案例名称",
  "category": "分类",
  "difficulty": "中",
  "prompt": "详细的测试提示词，要求生成完整可运行的HTML文件..."
}
```

#### 文生图案例

编辑 `test_cases/image_cases.json`：

```json
{
  "id": "I11",
  "name": "案例名称",
  "category": "场景设计",
  "difficulty": "中",
  "prompt": "Detailed English prompt describing the image..."
}
```

#### 注意事项

1. **ID必须唯一**，建议按顺序命名（T11, T12...）
2. **difficulty** 只能是: "简单", "中", "高"
3. **文生文提示词**建议包含"单文件完整可运行"要求
4. **文生图提示词**建议使用英文，效果更好

### 删除测试用例

直接从JSON文件中删除对应的案例对象即可。

### 修改测试用例

找到对应ID的案例，修改其字段：

```json
{
  "id": "T01",
  "name": "新名称",           ← 修改名称
  "category": "新分类",       ← 修改分类
  "difficulty": "高",         ← 修改难度
  "prompt": "新的提示词..."  ← 修改提示词
}
```

---

## 常见问题

### Q1: 启动失败，提示"未检测到Python"

**A:** 安装Python 3.7+，下载地址：https://www.python.org/downloads/

安装时记得勾选"Add Python to PATH"。

### Q2: 测试失败，日志显示"API调用失败"

**可能原因：**
1. API Key错误 → 检查密钥
2. API URL不正确 → 检查端点地址
3. 模型名称错误 → 检查模型名
4. 网络问题 → 检查网络连接
5. API配额不足 → 检查账户余额

**解决方法：**
1. 点击"清空日志"
2. 修改配置
3. 重新测试

### Q3: 文生文测试成功，但没有生成HTML文件

**原因：** AI模型没有按要求生成HTML代码块。

**查看方法：**
1. 打开 `output/text/案例名.json`
2. 查看response字段
3. 如果没有```html代码块，说明模型未正确响应

**改进：**
修改提示词，强调"必须生成完整的HTML代码，用```html包裹"

### Q4: 文生图测试成功，但没有图片文件

**原因：** API响应中没有base64编码的图片。

**检查：**
1. 确认使用的是图像生成模型
2. 查看JSON响应，确认有图片数据

### Q5: 测评时间太长

**优化方法：**
1. 提高并发线程数（10→20）
2. 减少测试案例数量
3. 检查网络速度
4. 使用响应速度快的API

### Q6: 可以测评其他模型吗？

**A:** 可以！只要API兼容OpenAI格式，包括：
- ✅ GPT系列（GPT-4, GPT-3.5等）
- ✅ Claude系列
- ✅ Gemini系列
- ✅ 通义千问
- ✅ 文心一言
- ✅ 智谱AI
- ✅ Moonshot
- ✅ DeepSeek
- ✅ 任何OpenAI兼容的服务

### Q7: 生成的网站可以部署吗？

**A:** 可以！`output/website/` 下的文件是纯静态网站。

**部署方式：**
1. 直接上传到Web服务器
2. 部署到GitHub Pages
3. 使用Vercel/Netlify等平台
4. 放在Nginx/Apache服务器

注意：图片和HTML文件的相对路径需要保持不变。

### Q8: 如何对比不同模型？

**方法1：多次测评**
```
1. 测评模型A，保存结果到 output_A/
2. 测评模型B，保存结果到 output_B/
3. 手动对比两个网站
```

**方法2：修改网站标题**
在生成网站前，修改配置中的模型名称，会显示在网站标题中。

### Q9: 配置文件保存在哪里？

**A:** `config.json`（与main.py同目录）

可以手动备份这个文件，方便切换不同配置。

### Q10: 可以自定义网站样式吗？

**A:** 可以！编辑 `website_generator.py` 中的CSS部分。

找到 `<style>` 标签，修改：
- 颜色：搜索 `#667eea`, `#764ba2`
- 布局：修改 `grid-template-columns`
- 字体：修改 `font-family`

---

## 最佳实践

### 1. 首次使用

```
步骤：
✅ 只测评文生文（10个案例）
✅ 并发数设为5
✅ 确认配置正确
✅ 查看结果是否符合预期

目的：快速验证配置，避免浪费时间
```

### 2. 正式测评

```
步骤：
✅ 同时测评文生文+文生图
✅ 并发数设为10-20
✅ 完整执行所有案例
✅ 生成正式报告

目的：获得完整的模型能力评估
```

### 3. 多模型对比

```
步骤：
✅ 创建配置文件副本（config_gpt4.json, config_claude.json）
✅ 依次加载不同配置
✅ 测评并保存结果到不同文件夹
✅ 统一对比分析

目的：科学对比不同模型的优劣
```

### 4. 定期测评

```
频率：每周/每月
目的：跟踪模型能力变化
操作：
✅ 使用相同的测试用例
✅ 记录测评日期
✅ 对比历史结果
```

### 5. 自定义场景

```
步骤：
✅ 分析你的实际需求
✅ 设计针对性的测试用例
✅ 添加到test_cases/*.json
✅ 执行测评
✅ 根据结果优化提示词

目的：评估模型在特定场景的表现
```

---

## 故障排除

### 程序无法启动

```bash
# 检查Python
python --version

# 重新安装依赖
pip install --upgrade -r requirements.txt

# 查看错误日志
type debug.log
```

### 测试卡住不动

```
可能原因：
1. 网络超时
2. API无响应
3. 线程死锁

解决方法：
1. 点击"停止"按钮
2. 检查网络
3. 降低并发数
4. 重启程序
```

### 内存占用过高

```
原因：并发数过高

解决：
1. 降低并发线程数到5-10
2. 关闭其他程序
3. 升级内存
```

---

## 快捷操作

### 键盘快捷键

程序本身不支持键盘快捷键，但可以使用：

```
网站中：
ESC - 关闭弹窗
```

### 常用文件路径

```
配置文件：config.json
文生文结果：output/text/
文生图结果：output/image/
网站文件：output/website/index.html
日志文件：debug.log
```

### 快速清理

删除以下文件夹可以清空所有结果：
```bash
output/text/
output/image/
output/website/
```

---

## 技术支持

遇到问题？

1. **查看日志** - 运行日志窗口有详细错误信息
2. **检查配置** - 确认API配置正确
3. **阅读文档** - README.md, 快速开始.md
4. **查看示例** - config.example.json

---

**祝你测评顺利！** 🎉
